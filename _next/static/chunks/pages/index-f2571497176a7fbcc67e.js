(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{904:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return g}});var s=t(5893),r=t(4699),i=t(7294),o=t(9008),c=t(1163),d=t(1055),a=t(7757),u=t.n(a),l=t(2137),p=t(6156),f=t(7917),h=t(1749),j=t(8817),m=t(5758),x=t.n(m);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function b(e){var n=e.response,t=Object.keys(n);return(0,s.jsx)(s.Fragment,{children:t.map((function(e,t){var r=n[e]||[];return(0,s.jsx)(y,v({},{endpoint:e,dataList:r}),t)}))})}function y(e){var n=e.endpoint,t=e.dataList;return(0,s.jsxs)("div",{className:x().endpointInfo,children:[(0,s.jsx)("div",{className:x().infoTitle,children:(0,s.jsx)("h1",{children:n})}),(0,s.jsx)("div",{className:x().infoList,children:t.map((function(e,t){return(0,s.jsx)(O,v({},{data:e,endpoint:n}),t)}))})]})}function O(e){var n=e.data,t=e.endpoint,i=(0,f.Z)((0,l.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.u9)(n.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),o=(0,r.Z)(i,2),a=o[0],p=o[1],m=(0,d.a)().user;function _(){return(_=(0,l.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.push({pathname:"".concat(t,"/[id]"),query:{id:n.id}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,l.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:confirm("Are you sure to delete endpoint '".concat(n.Name,"'?"))&&a();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,s.jsxs)("div",{className:x().listItem,children:[(0,s.jsx)("div",{className:x().itemText,children:(0,s.jsxs)("p",{children:["- ",n.Name," (Wait: ",n.Wait,"s)"]})}),m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:x().itemEdit,children:(0,s.jsx)(h.Z,{onClick:function(){return _.apply(this,arguments)},disabled:"pending"===p.status||"success"===p.status,children:"Edit"})}),(0,s.jsx)("div",{className:x().itemEdit,children:(0,s.jsx)(h.Z,{onClick:function(){return v.apply(this,arguments)},disabled:"pending"===p.status||"success"===p.status,children:"Delete"})}),(0,s.jsxs)("div",{className:x().itemText,children:["pending"===p.status&&(0,s.jsx)("i",{children:"Proceeding with deletion..."}),"error"===p.status&&(0,s.jsxs)("i",{children:["Error: ",p.error]}),"success"===p.status&&(0,s.jsx)("i",{children:"Endpoint deleted succesfully. Click 'Reload' to update list."})]})]})]})}var w=t(3679),N=t.n(w);function g(){var e=(0,d.a)().user,n=(0,f.Z)(j.U8),t=(0,r.Z)(n,2),a=t[0],u=t[1],l="idle"===u.status||"pending"===u.status;return(0,i.useEffect)((function(){a()}),[a]),(0,s.jsxs)("div",{className:N().endpointsVisualizer,children:[(0,s.jsx)(o.default,{children:(0,s.jsx)("title",{children:"Endpoints CMS"})}),(0,s.jsxs)("div",{className:N().endpointsContainer,children:["idle"===u.status&&(0,s.jsx)("p",{children:"Attempting to load your endpoints..."}),"pending"===u.status&&(0,s.jsx)("p",{children:"Loading your endpoints..."}),"error"===u.status&&(0,s.jsxs)("p",{children:["There's been an error (",u.error,")"]}),"success"===u.status&&(0,s.jsx)(b,{response:u.response})]}),(0,s.jsxs)("div",{className:N().endpointsControllers,children:[(0,s.jsx)(h.Z,{onClick:a,disabled:l,children:"Reload"}),e&&(0,s.jsx)(h.Z,{onClick:function(){return c.default.push("/create")},disabled:!("success"===u.status),children:"Add Endpoint"})]})]})}},5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(904)}])},5758:function(e){e.exports={endpointInfo:"endpointsHandler_endpointInfo__1DrnM",infoTitle:"endpointsHandler_infoTitle__Oq4xW",infoList:"endpointsHandler_infoList__15zMn",listItem:"endpointsHandler_listItem__V0OmX",itemEdit:"endpointsHandler_itemEdit__A4sQd",itemText:"endpointsHandler_itemText__gLWz3"}},3679:function(e){e.exports={endpointsVisualizer:"Home_endpointsVisualizer__2N4rS",endpointsControllers:"Home_endpointsControllers__QDyGS",endpointsContainer:"Home_endpointsContainer__dRrfm"}}},function(e){e.O(0,[936,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);