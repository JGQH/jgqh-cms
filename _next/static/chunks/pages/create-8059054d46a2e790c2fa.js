(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{9917:function(t,n,e){"use strict";e.d(n,{Z:function(){return d}});var r=e(4942);function a(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}var i=e(2115),s=e.n(i),o=e(5893),u=["className"];function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){(0,r.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function d(t){var n=t.className,e=a(t,u),r="".concat(n||""," ").concat(s().jbutton);return(0,o.jsx)("button",l(l({className:r},e),{},{children:e.children}))}},7917:function(t,n,e){"use strict";e.d(n,{Z:function(){return o}});var r=e(5861),a=e(7757),i=e.n(a),s=e(7294);function o(t){var n=(0,s.useReducer)((function(t,n){return n}),{status:"idle"}),e=n[0],a=n[1];return[(0,s.useCallback)((0,r.Z)(i().mark((function n(){var e,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({status:"pending"}),n.prev=1,n.next=4,t();case 4:e=n.sent,a({status:"success",response:e}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),r=n.t0.message,a({status:"error",error:r});case 12:case"end":return n.stop()}}),n,null,[[1,8]])}))),[t]),e]}},9914:function(t,n,e){"use strict";e.d(n,{Z:function(){return o}});var r=e(7294),a=e(1163),i=e(1055),s=e(5893);function o(t){var n=t.userOnly,e=t.redirectTo,o=t.children,u=(0,i.a)().user,c=(0,r.useState)(!0),l=c[0],d=c[1];return(0,r.useEffect)((function(){n&&!u||!n&&u?a.default.push(e):d(!1)}),[n,e,u]),l?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsx)(s.Fragment,{children:o})}},8817:function(t,n,e){"use strict";e.d(n,{U8:function(){return o},KX:function(){return c},gg:function(){return d},XH:function(){return p},u9:function(){return m}});var r=e(5861),a=e(7757),i=e.n(a),s=e(483);function o(){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)(i().mark((function t(){var n,e,r,a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.from("Endpoints").select("id, Endpoint, Name, Wait");case 2:if(n=t.sent,e=n.data,r=n.error,a=n.status,!r||406===a){t.next=8;break}throw r;case 8:return o={},e&&e.forEach((function(t){var n=o[t.Endpoint]||[];n.push({id:t.id,Name:t.Name,Wait:t.Wait}),o[t.Endpoint]=n})),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(t,n){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(i().mark((function t(n,e){var r,a,o,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.from(e).select().match({Endpoint_id:n});case 2:if(r=t.sent,a=r.data,o=r.error,u=r.status,!o||406===u){t.next=8;break}throw o;case 8:return t.abrupt("return",a&&a[0]);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t,n,e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(i().mark((function t(n,e,r){var a,o,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.from(e).update(r,{returning:"minimal"}).match({id:n});case 2:if(a=t.sent,o=a.error,u=a.status,!o||406===u){t.next=7;break}throw o;case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,n,e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(i().mark((function t(n,e,r){var a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<4)){t.next=2;break}throw new Error("'Name' field is too short");case 2:if(!isNaN(r)){t.next=4;break}throw new Error("Invalid 'wait' value");case 4:return t.next=6,s.Z.rpc("create_endpoint",{endpoint_type:n,endpoint_name:e,endpoint_wait:r});case 6:if(a=t.sent,!(o=a.error)){t.next=10;break}throw o;case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(i().mark((function t(n){var e,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.rpc("delete_endpoint",{endpoint_id:n});case 2:if(e=t.sent,!(r=e.error)){t.next=6;break}throw r;case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},5734:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return x}});var r,a=e(885),i=e(7294),s=e(1163),o=e(9008),u=e(9917),c=e(7917),l=e(9914),d=e(8817),f=e(1809),p=e.n(f);!function(t){t.STATIC="static",t.DYNAMIC="dynamic",t.JSON="json",t.IMAGES="images"}(r||(r={}));var h=e(5893),m=[r.STATIC,r.DYNAMIC,r.JSON,r.IMAGES];function v(){var t=(0,i.useState)(0),n=t[0],e=t[1],r=(0,i.useState)(""),l=r[0],f=r[1],v=(0,i.useState)("0"),x=v[0],j=v[1],y=(0,c.Z)((function(){return(0,d.XH)(m[n],l,+x)})),b=(0,a.Z)(y,2),_=b[0],w=b[1];return(0,h.jsxs)("div",{className:p().modalPage,children:[(0,h.jsx)(o.default,{children:(0,h.jsx)("title",{children:"Create - Endpoint CMS"})}),(0,h.jsxs)("div",{className:p().modalContainer,children:[(0,h.jsx)("div",{className:p().modalTitle,children:(0,h.jsx)("h1",{children:"Create Endpoint"})}),(0,h.jsxs)("div",{className:p().modalContent,children:[(0,h.jsxs)("div",{className:p().modalInput,children:[(0,h.jsx)("div",{className:p().inputTitle,children:(0,h.jsx)("p",{children:"Type"})}),(0,h.jsx)("div",{className:p().inputField,children:(0,h.jsx)("select",{onChange:function(t){return e(+t.target.value)},children:m.map((function(t,n){return(0,h.jsx)("option",{value:n,children:t},n)}))})})]}),(0,h.jsxs)("div",{className:p().modalInput,children:[(0,h.jsx)("div",{className:p().inputTitle,children:(0,h.jsx)("p",{children:"Name"})}),(0,h.jsx)("div",{className:p().inputField,children:(0,h.jsx)("input",{type:"text",onChange:function(t){return f(t.target.value)}})})]}),(0,h.jsxs)("div",{className:p().modalInput,children:[(0,h.jsx)("div",{className:p().inputTitle,children:(0,h.jsx)("p",{children:"Wait"})}),(0,h.jsx)("div",{className:p().inputField,children:(0,h.jsx)("input",{type:"text",onChange:function(t){return j(t.target.value)},defaultValue:"0"})})]})]}),(0,h.jsxs)("div",{className:p().modalActions,children:[(0,h.jsx)(u.Z,{onClick:function(){return s.default.push("/")},children:"Return"}),(0,h.jsx)(u.Z,{onClick:_,disabled:"pending"===w.status,children:"Create"})]}),(0,h.jsxs)("div",{className:p().modalMessages,children:["pending"===w.status&&(0,h.jsx)("p",{children:"Creating endpoint..."}),"success"===w.status&&(0,h.jsx)("p",{children:"Endpoint created successfully"}),"error"===w.status&&(0,h.jsxs)("p",{children:["There's been an error (",w.error,")"]})]})]})]})}function x(){return(0,h.jsx)(l.Z,{userOnly:!0,redirectTo:"/",children:(0,h.jsx)(v,{})})}},1925:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return e(5734)}])},2115:function(t){t.exports={jbutton:"jbutton_jbutton__2iOwu"}},1809:function(t){t.exports={modalPage:"Modal_modalPage__3jED4",modalContainer:"Modal_modalContainer__2G4el",modalTitle:"Modal_modalTitle__25cGL",modalContent:"Modal_modalContent__2fOkv",modalInput:"Modal_modalInput__2MDo0",inputTitle:"Modal_inputTitle__3qVBE",inputField:"Modal_inputField__1sv-x",modalActions:"Modal_modalActions__3EzL2",modalMessages:"Modal_modalMessages__mMfY7"}},9008:function(t,n,e){t.exports=e(639)},907:function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}e.d(n,{Z:function(){return r}})},885:function(t,n,e){"use strict";e.d(n,{Z:function(){return a}});var r=e(181);function a(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,a,i=[],s=!0,o=!1;try{for(e=e.call(t);!(s=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);s=!0);}catch(u){o=!0,a=u}finally{try{s||null==e.return||e.return()}finally{if(o)throw a}}return i}}(t,n)||(0,r.Z)(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(t,n,e){"use strict";e.d(n,{Z:function(){return a}});var r=e(907);function a(t,n){if(t){if("string"===typeof t)return(0,r.Z)(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?(0,r.Z)(t,n):void 0}}}},function(t){t.O(0,[774,888,179],(function(){return n=1925,t(t.s=n);var n}));var n=t.O();_N_E=n}]);