(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9917:function(n,t,e){"use strict";e.d(t,{Z:function(){return l}});var r=e(4942);function i(n,t){if(null==n)return{};var e,r,i=function(n,t){if(null==n)return{};var e,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||(i[e]=n[e]);return i}(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(i[e]=n[e])}return i}var s=e(2115),o=e.n(s),a=e(5893),u=["className"];function c(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function d(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?c(Object(e),!0).forEach((function(t){(0,r.Z)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function l(n){var t=n.className,e=i(n,u),r="".concat(t||""," ").concat(o().jbutton);return(0,a.jsx)("button",d(d({className:r},e),{},{children:e.children}))}},7917:function(n,t,e){"use strict";e.d(t,{Z:function(){return a}});var r=e(5861),i=e(7757),s=e.n(i),o=e(7294);function a(n){var t=(0,o.useReducer)((function(n,t){return t}),{status:"idle"}),e=t[0],i=t[1];return[(0,o.useCallback)((0,r.Z)(s().mark((function t(){var e,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i({status:"pending"}),t.prev=1,t.next=4,n();case 4:e=t.sent,i({status:"success",response:e}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),r=t.t0.message,i({status:"error",error:r});case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),[n]),e]}},8817:function(n,t,e){"use strict";e.d(t,{U8:function(){return a},KX:function(){return c},gg:function(){return l},XH:function(){return f},u9:function(){return m}});var r=e(5861),i=e(7757),s=e.n(i),o=e(483);function a(){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)(s().mark((function n(){var t,e,r,i,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.from("Endpoints").select("id, Endpoint, Name, Wait");case 2:if(t=n.sent,e=t.data,r=t.error,i=t.status,!r||406===i){n.next=8;break}throw r;case 8:return a={},e&&e.forEach((function(n){var t=a[n.Endpoint]||[];t.push({id:n.id,Name:n.Name,Wait:n.Wait}),a[n.Endpoint]=t})),n.abrupt("return",a);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(n,t){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(s().mark((function n(t,e){var r,i,a,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.from(e).select().match({Endpoint_id:t});case 2:if(r=n.sent,i=r.data,a=r.error,u=r.status,!a||406===u){n.next=8;break}throw a;case 8:return n.abrupt("return",i&&i[0]);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(n,t,e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(s().mark((function n(t,e,r){var i,a,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.from(e).update(r,{returning:"minimal"}).match({id:t});case 2:if(i=n.sent,a=i.error,u=i.status,!a||406===u){n.next=7;break}throw a;case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(n,t,e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(s().mark((function n(t,e,r){var i,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length<4)){n.next=2;break}throw new Error("'Name' field is too short");case 2:if(!isNaN(r)){n.next=4;break}throw new Error("Invalid 'wait' value");case 4:return n.next=6,o.Z.rpc("create_endpoint",{endpoint_type:t,endpoint_name:e,endpoint_wait:r});case 6:if(i=n.sent,!(a=i.error)){n.next=10;break}throw a;case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(n){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(s().mark((function n(t){var e,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.rpc("delete_endpoint",{endpoint_id:t});case 2:if(e=n.sent,!(r=e.error)){n.next=6;break}throw r;case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},904:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return _}});var r=e(885),i=e(7294),s=e(9008),o=e(1163),a=e(1055),u=e(5861),c=e(7757),d=e.n(c),l=e(7917),p=e(9917),f=e(8817),h=e(3206),m=e.n(h),x=e(5893);function v(n){var t=n.response,e=Object.keys(t);return(0,x.jsx)(x.Fragment,{children:e.map((function(n,e){var r=t[n]||[];return(0,x.jsx)(y,{endpoint:n,dataList:r},e)}))})}function y(n){var t=n.endpoint,e=n.dataList;return(0,x.jsxs)("div",{className:m().endpointInfo,children:[(0,x.jsx)("div",{className:m().infoTitle,children:(0,x.jsx)("h1",{children:t})}),(0,x.jsx)("div",{className:m().infoList,children:e.map((function(n,e){return(0,x.jsx)(b,{data:n,endpoint:t},e)}))})]})}function b(n){var t=n.data,e=n.endpoint,i=(0,l.Z)((0,u.Z)(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.u9)(t.id);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))),s=(0,r.Z)(i,2),c=s[0],h=s[1],v=(0,a.a)().user;function y(){return(y=(0,u.Z)(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.default.push({pathname:"".concat(e,"/[id]"),query:{id:t.id}});case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(){return(b=(0,u.Z)(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:confirm("Are you sure to delete endpoint '".concat(t.Name,"'?"))&&c();case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,x.jsxs)("div",{className:m().listItem,children:[(0,x.jsx)("div",{className:m().itemText,children:(0,x.jsxs)("p",{children:["- ",t.Name," (Wait: ",t.Wait,"s)"]})}),v&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:m().itemEdit,children:(0,x.jsx)(p.Z,{onClick:function(){return y.apply(this,arguments)},disabled:"pending"===h.status||"success"===h.status,children:"Edit"})}),(0,x.jsx)("div",{className:m().itemEdit,children:(0,x.jsx)(p.Z,{onClick:function(){return b.apply(this,arguments)},disabled:"pending"===h.status||"success"===h.status,children:"Delete"})}),(0,x.jsxs)("div",{className:m().itemText,children:["pending"===h.status&&(0,x.jsx)("i",{children:"Proceeding with deletion..."}),"error"===h.status&&(0,x.jsxs)("i",{children:["Error: ",h.error]}),"success"===h.status&&(0,x.jsx)("i",{children:"Endpoint deleted succesfully. Click 'Reload' to update list."})]})]})]})}var j=e(9954),w=e.n(j);function _(){var n=(0,a.a)().user,t=(0,l.Z)(f.U8),e=(0,r.Z)(t,2),u=e[0],c=e[1],d="idle"===c.status||"pending"===c.status;return(0,i.useEffect)((function(){u()}),[u]),(0,x.jsxs)("div",{className:w().endpointsVisualizer,children:[(0,x.jsx)(s.default,{children:(0,x.jsx)("title",{children:"Endpoints CMS"})}),(0,x.jsxs)("div",{className:w().endpointsContainer,children:["idle"===c.status&&(0,x.jsx)("p",{children:"Attempting to load your endpoints..."}),"pending"===c.status&&(0,x.jsx)("p",{children:"Loading your endpoints..."}),"error"===c.status&&(0,x.jsxs)("p",{children:["There's been an error (",c.error,")"]}),"success"===c.status&&(0,x.jsx)(v,{response:c.response})]}),(0,x.jsxs)("div",{className:w().endpointsControllers,children:[(0,x.jsx)(p.Z,{onClick:u,disabled:d,children:"Reload"}),n&&(0,x.jsx)(p.Z,{onClick:function(){return o.default.push("/create")},disabled:!("success"===c.status),children:"Add Endpoint"})]})]})}},5301:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(904)}])},3206:function(n){n.exports={endpointInfo:"endpointsHandler_endpointInfo__1DrnM",infoTitle:"endpointsHandler_infoTitle__Oq4xW",infoList:"endpointsHandler_infoList__15zMn",listItem:"endpointsHandler_listItem__V0OmX",itemEdit:"endpointsHandler_itemEdit__A4sQd",itemText:"endpointsHandler_itemText__gLWz3"}},2115:function(n){n.exports={jbutton:"jbutton_jbutton__2iOwu"}},9954:function(n){n.exports={endpointsVisualizer:"Home_endpointsVisualizer__2N4rS",endpointsControllers:"Home_endpointsControllers__QDyGS",endpointsContainer:"Home_endpointsContainer__dRrfm"}},9008:function(n,t,e){n.exports=e(639)},907:function(n,t,e){"use strict";function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}e.d(t,{Z:function(){return r}})},885:function(n,t,e){"use strict";e.d(t,{Z:function(){return i}});var r=e(181);function i(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,s=[],o=!0,a=!1;try{for(e=e.call(n);!(o=(r=e.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(u){a=!0,i=u}finally{try{o||null==e.return||e.return()}finally{if(a)throw i}}return s}}(n,t)||(0,r.Z)(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(n,t,e){"use strict";e.d(t,{Z:function(){return i}});var r=e(907);function i(n,t){if(n){if("string"===typeof n)return(0,r.Z)(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?(0,r.Z)(n,t):void 0}}}},function(n){n.O(0,[774,888,179],(function(){return t=5301,n(n.s=t);var t}));var t=n.O();_N_E=t}]);